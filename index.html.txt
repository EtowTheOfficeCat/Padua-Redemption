<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Padua Redemption</title>
  <style>
    :root {
      --bg: #7a7a7a;          /* page grey */
      --card: #f3f3f3;        /* game panel */
      --text: #1b1b1b;
      --muted: #5a5a5a;
      --border: #cfcfcf;
      --shadow: rgba(0,0,0,.18);
    }

    * { box-sizing: border-box; }

    body {
      margin: 0;
      min-height: 100vh;
      font-family: system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, sans-serif;
      background: var(--bg);
      color: var(--text);
      display: grid;
      place-items: center; /* centers minigame */
      padding: 24px;
    }

    .wrap {
      width: min(520px, 100%);
      text-align: center;
    }

    h1 {
      margin: 0 0 14px;
      font-size: clamp(28px, 4vw, 40px);
      letter-spacing: 0.5px;
      color: #111;
      text-shadow: 0 1px 0 rgba(255,255,255,.2);
    }

    .card {
      background: var(--card);
      border: 1px solid var(--border);
      border-radius: 16px;
      box-shadow: 0 10px 30px var(--shadow);
      padding: 18px;
    }

    .status {
      display: flex;
      align-items: center;
      justify-content: space-between;
      gap: 12px;
      margin-bottom: 14px;
      padding: 10px 12px;
      border-radius: 12px;
      background: #ffffff;
      border: 1px solid var(--border);
      font-size: 14px;
    }

    .status strong { font-weight: 700; }
    .status .sub { color: var(--muted); }

    .board {
      width: min(360px, 100%);
      margin: 0 auto;
      display: grid;
      grid-template-columns: repeat(3, 1fr);
      gap: 10px;
      padding: 10px;
      border-radius: 14px;
      background: #ffffff;
      border: 1px solid var(--border);
    }

    .cell {
      aspect-ratio: 1 / 1;
      border: 1px solid var(--border);
      border-radius: 14px;
      background: #fafafa;
      font-size: clamp(44px, 8vw, 64px);
      font-weight: 800;
      cursor: pointer;
      display: grid;
      place-items: center;
      transition: transform .08s ease, background .12s ease;
      user-select: none;
    }

    .cell:hover { background: #f0f0f0; }
    .cell:active { transform: scale(0.98); }
    .cell[disabled] { cursor: not-allowed; opacity: 0.85; }

    .controls {
      display: flex;
      justify-content: center;
      gap: 10px;
      margin-top: 14px;
      flex-wrap: wrap;
    }

    button {
      appearance: none;
      border: 1px solid var(--border);
      background: #ffffff;
      padding: 10px 14px;
      border-radius: 999px;
      cursor: pointer;
      font-weight: 650;
      transition: transform .08s ease, background .12s ease;
    }

    button:hover { background: #f6f6f6; }
    button:active { transform: scale(0.98); }

    .note {
      margin-top: 10px;
      font-size: 12px;
      color: rgba(0,0,0,.65);
    }

    .win {
      outline: 3px solid rgba(0, 0, 0, 0.18);
      background: #eaeaea !important;
    }
  </style>
</head>
<body>
  <div class="wrap">
    <h1>Padua Redemption</h1>

    <div class="card" role="application" aria-label="Tic Tac Toe">
      <div class="status" aria-live="polite">
        <div>
          <div><strong id="turnLabel">Turn:</strong> <span id="turnValue">X</span></div>
          <div class="sub" id="resultText">Make your move.</div>
        </div>
        <div class="sub">
          X: <span id="xWins">0</span> &nbsp;|&nbsp;
          O: <span id="oWins">0</span> &nbsp;|&nbsp;
          Draws: <span id="draws">0</span>
        </div>
      </div>

      <div class="board" id="board">
        <button class="cell" data-i="0" aria-label="Cell 1"></button>
        <button class="cell" data-i="1" aria-label="Cell 2"></button>
        <button class="cell" data-i="2" aria-label="Cell 3"></button>
        <button class="cell" data-i="3" aria-label="Cell 4"></button>
        <button class="cell" data-i="4" aria-label="Cell 5"></button>
        <button class="cell" data-i="5" aria-label="Cell 6"></button>
        <button class="cell" data-i="6" aria-label="Cell 7"></button>
        <button class="cell" data-i="7" aria-label="Cell 8"></button>
        <button class="cell" data-i="8" aria-label="Cell 9"></button>
      </div>

      <div class="controls">
        <button id="resetRound" type="button">Reset Round</button>
        <button id="resetAll" type="button">Reset Scores</button>
      </div>

      <div class="note">Local two-player: X vs O on the same device.</div>
    </div>
  </div>

  <script>
    (() => {
      const cells = Array.from(document.querySelectorAll(".cell"));
      const turnValue = document.getElementById("turnValue");
      const resultText = document.getElementById("resultText");

      const xWinsEl = document.getElementById("xWins");
      const oWinsEl = document.getElementById("oWins");
      const drawsEl = document.getElementById("draws");

      const resetRoundBtn = document.getElementById("resetRound");
      const resetAllBtn = document.getElementById("resetAll");

      let board = Array(9).fill("");
      let current = "X";
      let gameOver = false;

      let xWins = 0, oWins = 0, draws = 0;

      const winLines = [
        [0,1,2],[3,4,5],[6,7,8],
        [0,3,6],[1,4,7],[2,5,8],
        [0,4,8],[2,4,6]
      ];

      function setStatus(message) {
        resultText.textContent = message;
        turnValue.textContent = current;
      }

      function clearHighlights() {
        cells.forEach(c => c.classList.remove("win"));
      }

      function lockBoard(lock) {
        cells.forEach(c => {
          c.disabled = lock;
          c.setAttribute("aria-disabled", String(lock));
        });
      }

      function checkWinner() {
        for (const [a,b,c] of winLines) {
          if (board[a] && board[a] === board[b] && board[a] === board[c]) {
            return { winner: board[a], line: [a,b,c] };
          }
        }
        if (board.every(v => v)) return { winner: "draw", line: [] };
        return null;
      }

      function handleMove(i) {
        if (gameOver || board[i]) return;

        board[i] = current;
        cells[i].textContent = current;

        const outcome = checkWinner();
        if (outcome) {
          gameOver = true;
          lockBoard(true);

          if (outcome.winner === "draw") {
            draws++;
            drawsEl.textContent = String(draws);
            setStatus("Draw! Reset round to play again.");
          } else {
            outcome.line.forEach(idx => cells[idx].classList.add("win"));
            if (outcome.winner === "X") {
              xWins++;
              xWinsEl.textContent = String(xWins);
            } else {
              oWins++;
              oWinsEl.textContent = String(oWins);
            }
            setStatus(`${outcome.winner} wins! Reset round to play again.`);
          }
          return;
        }

        current = current === "X" ? "O" : "X";
        setStatus("Make your move.");
      }

      function resetRound() {
        board = Array(9).fill("");
        current = "X";
        gameOver = false;
        cells.forEach(c => (c.textContent = ""));
        clearHighlights();
        lockBoard(false);
        setStatus("Make your move.");
      }

      function resetAll() {
        xWins = 0; oWins = 0; draws = 0;
        xWinsEl.textContent = "0";
        oWinsEl.textContent = "0";
        drawsEl.textContent = "0";
        resetRound();
      }

      // Wire up events
      cells.forEach(cell => {
        cell.addEventListener("click", () => handleMove(Number(cell.dataset.i)));
      });

      resetRoundBtn.addEventListener("click", resetRound);
      resetAllBtn.addEventListener("click", resetAll);

      // Init
      lockBoard(false);
      setStatus("Make your move.");
    })();
  </script>
</body>
</html>
